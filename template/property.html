{% extends "base.html" %}

{% block content %}

<div class="container">

  <form action="." method="post" enctype="multipart/form-data">

    {% csrf_token %}
    {{form.as_p}}

    <button type="submit" class="btn btn-lg btn-success">Upload</button>
  </form>

  {% if obj %}
  <h3>Succesfully uploaded : {{img_obj.caption}}</h3>
  <img src="{{ obj.image.url}}" alt="image" class="img-thumbnail">
  {% endif %}
  <hr>


  {% for x in img %}
  {% if forloop.first %}
  <div class="row ">{% endif %}
    <div class="col-md-4 p-5">
      <div class="p-3" style="box-shadow: 0px 0px 20px black;">
        <img src="{{x.image.url}}" alt="not found" height="250" width="100%">
        <h4 class="text-center">{{x.caption}}</h4>
      </div>
    </div>
    {% if forloop.counter|divisibleby:3 %}
  </div>
  <div class=row>{% endif %}

    {% if forloop.last %}</div>{% endif %}

  {% endfor %}

  {% endblock content %}